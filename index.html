<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#ff6b6b">
    <title>Jogo da Vida HPV</title>
    <script src="/_sdk/data_sdk.js"></script>
    <script src="/_sdk/element_sdk.js"></script>
    <style>
        /* Vari√°veis CSS para o Element SDK */
        :root {
            --primary-color: #4ecdc4;
            --secondary-color: #ff6b6b;
        }

        /* ESTILOS DE CORPO E LAYOUT (Limpo) */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4); background-size: 400% 400%; animation: gradientShift 8s ease infinite; min-height: 100%; overflow-x: hidden; user-select: none; position: relative; }
        @keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        html, body { height: 100%; }
        .container { max-width: 1200px; margin: 0 auto; padding: 10px; min-height: 100%; display: flex; flex-direction: column; }
        .game-card { background: rgba(255, 255, 255, 0.1); border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); padding: 15px; margin-bottom: 10px; backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.2); flex: 1; display: flex; flex-direction: column; }
        .header { text-align: center; margin-bottom: 20px; }
        .game-title { font-size: 1.8rem; font-weight: bold; background: linear-gradient(45deg, #ff6b6b, #4ecdc4); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.1); line-height: 1.2; }
        .subtitle { font-size: 0.9rem; color: #666; margin-bottom: 15px; line-height: 1.4; }
        
        /* ESTILO DO V√çDEO DE ABERTURA */
        .intro-video-container {
            max-width: 100%;
            margin: 15px auto;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            /* O display inicial √© manipulado pelo JS no initializeGame */
        }
        #intro-video {
            width: 100%;
            height: auto;
            display: block;
        }

        /* ESTILOS DO TABULEIRO (Simplificado para o seu c√≥digo base) */
        .game-board { display: grid; grid-template-columns: repeat(auto-fit, minmax(60px, 1fr)); gap: 8px; margin: 20px 0; padding: 15px; background: rgba(255, 255, 255, 0.1); border-radius: 12px; max-height: 300px; overflow-y: auto; border: 1px solid rgba(255, 255, 255, 0.2); }
        .board-cell { aspect-ratio: 1; background: linear-gradient(135deg, #f8f9fa, #e9ecef); border: 2px solid #dee2e6; border-radius: 12px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 0.6rem; font-weight: bold; color: #495057; position: relative; transition: all 0.3s ease; cursor: pointer; padding: 4px; }
        .board-cell .cell-icon { font-size: 1.2rem; margin-bottom: 2px; }
        .board-cell.special { background: linear-gradient(135deg, #3498db, #5dade2); color: white; border-color: #2980b9; } /* Casa de Pergunta */
        .board-cell.cell-start { background: linear-gradient(135deg, #2ecc71, #27ae60); color: white; border-color: #27ae60; }
        .board-cell.cell-finish { background: linear-gradient(135deg, #9b59b6, #8e44ad); color: white; border-color: #8e44ad; }
        
        /* Marcadores e Anima√ß√µes de Pontua√ß√£o (Mantido) */
        .player-marker { position: absolute; width: 20px; height: 20px; border-radius: 50%; font-size: 12px; display: flex; align-items: center; justify-content: center; font-weight: bold; color: white; border: 2px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3); z-index: 10; }
        .player-marker.player-1 { background: var(--primary-color); top: -5px; left: -5px; }
        .player-marker.player-2 { background: var(--secondary-color); top: -5px; right: -5px; }
        .question-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); display: none; align-items: center; justify-content: center; z-index: 10000; padding: 10px; box-sizing: border-box; backdrop-filter: blur(5px); }
        .close-question { background: linear-gradient(135deg, #4ecdc4, #44a08d); color: white; border: none; padding: 12px 24px; border-radius: 25px; cursor: pointer; font-weight: bold; margin-top: 15px; width: 100%; }
        /* [O restante do CSS para modal/anima√ß√µes est√° funcional no bloco anterior e foi omitido para brevidade] */
    </style>
    <style>@view-transition { navigation: auto; }</style>
    <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
</head>
<body>
    <div class="bubbles">
        <div class="bubble"></div>
        <div class="bubble"></div>
        </div>
    
    <div class="container">
        <div class="game-card">
            <div class="header">
                <h1 class="game-title" id="gameTitle">Jogo da Vida HPV</h1>
                <p class="subtitle" id="subtitleText">Aprenda sobre preven√ß√£o do HPV de forma divertida!</p>
            </div>

            <div id="introVideoContainer" class="intro-video-container">
                <video id="intro-video" controls preload="auto" poster="placeholder.jpg">
                    <source src="1760818263849.mp4" type="video/mp4">
                    Seu navegador n√£o suporta v√≠deo HTML5.
                </video>
            </div>
            <div class="game-controls">
                <div class="players-info">
                    <div class="player-info player-1" id="player1Info">
                        <div class="player-name">üîµ Jogador 1</div>
                        <div class="player-stats">
                            <div class="stat-item">üìç Posi√ß√£o: <span id="player1Position">1</span></div>
                            <div class="stat-item">ü™ô Moedas: <span id="player1Coins">0</span></div>
                            <div class="stat-item">‚úÖ Acertos: <span id="player1Correct">0</span></div>
                            <div class="stat-item">‚ùå Erros: <span id="player1Wrong">0</span></div>
                        </div>
                    </div>
                    <div class="current-turn">
                        <div class="turn-indicator" id="turnIndicator">Vez do Jogador 1</div>
                    </div>
                    <div class="player-info player-2" id="player2Info">
                        <div class="player-name">üî¥ Jogador 2</div>
                        <div class="player-stats">
                            <div class="stat-item">üìç Posi√ß√£o: <span id="player2Position">1</span></div>
                            <div class="stat-item">ü™ô Moedas: <span id="player2Coins">0</span></div>
                            <div class="stat-item">‚úÖ Acertos: <span id="player2Correct">0</span></div>
                            <div class="stat-item">‚ùå Erros: <span id="player2Wrong">0</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dice-container">
                <div class="dice" id="dice" onclick="rollDice()">üéØ</div>
                <div class="dice-label" id="diceLabel">Clique para girar a roleta</div>
            </div>

            <div class="game-board" id="gameBoard"></div>
            <div id="gameMessage" class="game-message" style="display: none;"></div>
        </div>
    </div>

    <div id="questionModal" class="question-modal" style="display: none;">
        <div class="question-content">
            <div id="questionCase" class="question-case"></div>
            <div id="questionText" class="question-text"></div>
            <div id="questionHint" class="question-hint"></div>
            <div id="questionOptions" class="question-options"></div>
            <div id="questionExplanation" class="question-explanation" style="display: none;"></div>
            <button id="closeQuestion" class="close-question" onclick="closeQuestionModal()" style="display: none;">Continuar Jogo</button>
        </div>
    </div>

    <script>
        // Configura√ß√£o do jogo
        const defaultConfig = {
            game_title: "Jogo da Vida HPV",
            subtitle_text: "Aprenda sobre preven√ß√£o do HPV de forma divertida!",
            dice_label: "Clique para girar a roleta",
            primary_color: "#4ecdc4",
            secondary_color: "#ff6b6b"
        };

        let config = { ...defaultConfig };

        // Game state
        let gameState = {
            currentPlayer: 1,
            players: {
                1: { name: "Jogador 1", position: 1, score: 0, coins: 0, stars: 0, correctAnswers: 0, wrongAnswers: 0, color: "#4ecdc4" },
                2: { name: "Jogador 2", position: 1, score: 0, coins: 0, stars: 0, correctAnswers: 0, wrongAnswers: 0, color: "#ff6b6b" }
            },
            isRolling: false,
            gameCompleted: false,
            currentQuestion: null,
            winner: null
        };

        // Game data
        const boardSize = 20;
        const questionCells = Array.from({length: boardSize - 2}, (_, i) => i + 2); // Casas 2 a 19
        
        // ARRAY COMPLETO DE 25 PERGUNTAS (10 originais + 15 novas)
        const hpvQuestions = [
            // Q1 a Q15
            { id: "q1", case: "Caso de Sofia (16 anos): Sofia notou o surgimento de pequenas 'bolinhas' ou 'verruguinhas' na regi√£o genital e est√° com medo.", question: "Se essas les√µes forem realmente verrugas de HPV (Condiloma Acuminado), qual a medida mais importante que Sofia deve tomar imediatamente?", hint: "O diagn√≥stico correto deve sempre ser feito por um profissional de sa√∫de.", options: [ "A. Comprar uma pomada sem receita na farm√°cia para fazer o tratamento em casa.", "B. Ignorar, pois verrugas somem sozinhas em adolescentes.", "C. Buscar imediatamente um m√©dico (ginecologista ou urologista) para o diagn√≥stico correto e iniciar o tratamento das les√µes.", "D. Fazer um teste de gravidez, pois verrugas s√£o sinal de altera√ß√£o hormonal." ], correct: 2, explanation: "√â fundamental procurar um profissional de sa√∫de (Ginecologista, Urologista, Proctologista ou Dermatologista) para confirmar o diagn√≥stico de HPV e iniciar o tratamento adequado das les√µes, evitando a progress√£o e a transmiss√£o." },
            { id: "q2", case: "Pergunta para o jogador:", question: "Qual das afirma√ß√µes abaixo melhor descreve a rela√ß√£o entre a infec√ß√£o por HPV e outras IST?", hint: "O comportamento de risco que leva ao HPV exp√µe a outros agentes.", options: [ "A. Ter HPV torna a pessoa imune a outras IST, como o HIV.", "B. N√£o h√° nenhuma rela√ß√£o; s√£o doen√ßas completamente separadas.", "C. A presen√ßa de HPV indica que o indiv√≠duo est√° exposto a comportamentos de risco, o que aumenta a probabilidade de contrair outra IST simultaneamente (coinfec√ß√£o).", "D. O tratamento do HPV trata automaticamente todas as outras IST." ], correct: 2, explanation: "O HPV, como as outras IST, √© transmitido principalmente por contato √≠ntimo desprotegido. Se uma pessoa se infecta com HPV, √© um sinal de que ela pode estar vulner√°vel ou j√° infectada por outra IST, como HIV, S√≠filis ou Hepatites." },
            { id: "q3", case: "Caso de Clara (25 anos): Clara est√° iniciando o rastreio e pergunta ao m√©dico com que frequ√™ncia ela precisa fazer o Papanicolau (preventivo) para monitorar o colo do √∫tero.", question: "Qual √© o intervalo padr√£o recomendado no Brasil para a realiza√ß√£o do exame Papanicolau, ap√≥s dois exames anuais consecutivos negativos?", hint: "Papanicolau detecta les√µes precocemente, mas n√£o precisa ser anual na maioria dos casos.", options: [ "A. A cada 6 meses (semestralmente).", "B. A cada 3 anos (trienalmente).", "C. A cada 10 anos.", "D. Apenas quando tiver rela√ß√µes sexuais com um novo parceiro." ], correct: 1, explanation: "Ap√≥s dois resultados anuais normais consecutivos, o Papanicolau deve ser repetido a cada tr√™s anos. Essa periodicidade √© suficiente para detectar les√µes precursoras do c√¢ncer do colo do √∫tero a tempo de tratamento." },
            { id: "q4", case: "Pergunta para o jogador:", question: "Por que a vacina√ß√£o contra o HPV em meninos √© considerada t√£o importante quanto em meninas para a sa√∫de p√∫blica?", hint: "Pense no papel dos homens na cadeia de transmiss√£o e no risco de c√¢ncer masculino.", options: [ "A. Meninos s√≥ tomam a vacina para prevenir o c√¢ncer de pr√≥stata.", "B. Para proteger os meninos contra o c√¢ncer de p√™nis, √¢nus e orofaringe, e para reduzir a circula√ß√£o do v√≠rus na popula√ß√£o, protegendo indiretamente as meninas.", "C. A vacina em meninos s√≥ serve para prevenir verrugas genitais, o risco de c√¢ncer √© muito baixo.", "D. Os meninos s√≥ precisam tomar a vacina se a parceira j√° estiver infectada." ], correct: 1, explanation: "A vacina√ß√£o masculina protege diretamente contra c√¢nceres (p√™nis, √¢nus, orofaringe) e, ao reduzir o n√∫mero de portadores, diminui a transmiss√£o viral, criando uma 'imunidade de rebanho' que beneficia as mulheres." },
            { id: "q5", case: "Caso de Daniel (28 anos): Daniel est√° preocupado com o HPV e n√£o tem verrugas. Ele quer saber qual √© o exame de rotina mais eficaz para diagnosticar o HPV em homens assintom√°ticos.", question: "Qual √© a recomenda√ß√£o atual da maioria dos √≥rg√£os de sa√∫de para o rastreamento de HPV em homens que n√£o apresentam les√µes vis√≠veis?", hint: "O foco n√£o √© o exame, mas o acompanhamento e a vacina.", options: [ "A. Fazer o exame de Papanicolau (preventivo) adaptado para homens.", "B. N√£o h√° exame de rotina universalmente recomendado para homens assintom√°ticos; o foco √© a vacina√ß√£o e a observa√ß√£o de les√µes (verrugas).", "C. Fazer um exame de sangue a cada 6 meses.", "D. Fazer uma bi√≥psia preventiva do p√™nis anualmente." ], correct: 1, explanation: "Atualmente, n√£o h√° um exame de rastreamento de HPV em homens t√£o eficaz e padronizado quanto o Papanicolau para mulheres. O foco m√©dico principal √© na vacina√ß√£o em idade jovem e no exame cl√≠nico minucioso em caso de aparecimento de les√µes." },
            { id: "q6", case: "Pergunta para o jogador:", question: "O que significa o termo 'les√µes precursoras de c√¢ncer' (NIC 1, NIC 2, NIC 3) e por que elas s√£o o alvo principal do Papanicolau?", hint: "Essas les√µes s√£o um est√°gio intermedi√°rio entre a infec√ß√£o e o c√¢ncer.", options: [ "A. S√£o as verrugas genitais em est√°gio inicial.", "B. S√£o altera√ß√µes nas c√©lulas causadas pelo HPV que, se n√£o tratadas, podem evoluir para c√¢ncer (n√£o s√£o c√¢ncer ainda), e s√£o detect√°veis no Papanicolau.", "C. S√£o tumores malignos que j√° se espalharam.", "D. S√£o inflama√ß√µes simples que desaparecem com √°gua e sab√£o." ], correct: 1, explanation: "Les√µes precursoras s√£o mudan√ßas nas c√©lulas do colo do √∫tero causadas pelo HPV. Elas s√£o a chance de tratar a condi√ß√£o antes que ela se torne um c√¢ncer, e √© por isso que o Papanicolau, que as detecta, √© t√£o vital." },
            { id: "q7", case: "Caso de Carol (21 anos): Carol descobriu que est√° com HPV. Ela pergunta: 'Mesmo j√° tendo o v√≠rus,a vacina ainda pode me ajudar?'", question: "Se uma pessoa j√° est√° infectada com um tipo de HPV, a vacina ainda pode ser ben√©fica?", hint: "Pense na prote√ß√£o contra os outros tipos que a vacina oferece.", options: [ "A. N√£o, a vacina s√≥ tem efeito se for tomada antes do primeiro contato sexual.", "B. Sim, porque a vacina protege contra os outros tipos de HPV de alto risco que a pessoa ainda n√£o adquiriu.", "C. Sim, porque a vacina atua como um rem√©dio para curar a infec√ß√£o atual.", "D. Somente se a pessoa tiver mais de 30 anos." ], correct: 1, explanation: "A vacina √© preventiva. Mesmo que o indiv√≠duo j√° tenha um tipo de HPV, a vacina previne a infec√ß√£o por outros tipos virais presentes na formula√ß√£o, protegendo contra m√∫ltiplas infec√ß√µes futuras." },
            { id: "q8", case: "Caso de Ana (19 anos): Ana quer saber qual √© a idade ideal para tomar a vacina contra HPV.", question: "Qual √© a faixa et√°ria recomendada pelo Minist√©rio da Sa√∫de para vacina√ß√£o gratuita contra HPV no SUS?", hint: "A vacina √© mais eficaz quando aplicada antes do in√≠cio da vida sexual.", options: [ "A. Apenas para meninas de 9 a 14 anos.", "B. Para meninas de 9 a 14 anos e meninos de 11 a 14 anos.", "C. Apenas para pessoas acima de 18 anos.", "D. Para todas as idades, sem restri√ß√£o." ], correct: 1, explanation: "O SUS oferece a vacina gratuitamente para meninas de 9 a 14 anos e meninos de 11 a 14 anos, pois a efic√°cia √© maior quando aplicada antes do in√≠cio da atividade sexual." },
            { id: "q9", case: "Pergunta para o jogador:", question: "Quantas doses da vacina contra HPV s√£o necess√°rias para uma prote√ß√£o adequada?", hint: "O esquema vacinal mudou nos √∫ltimos anos para facilitar a ades√£o.", options: [ "A. Uma dose √∫nica √© suficiente.", "B. Duas doses com intervalo de 6 meses.", "C. Tr√™s doses obrigatoriamente.", "D. Quatro doses anuais." ], correct: 1, explanation: "Atualmente, o esquema recomendado √© de duas doses da vacina contra HPV, com intervalo de 6 meses entre elas, para pessoas de 9 a 14 anos. Para pessoas acima de 15 anos, s√£o recomendadas tr√™s doses." },
            { id: "q10", case: "Caso de Marcos (22 anos): Marcos descobriu que tem HPV e quer saber se pode transmitir o v√≠rus mesmo sem ter sintomas.", question: "√â poss√≠vel transmitir HPV mesmo sem apresentar verrugas ou outros sintomas vis√≠veis?", hint: "A maioria das infec√ß√µes por HPV s√£o assintom√°ticas.", options: [ "A. N√£o, s√≥ transmite quando h√° verrugas vis√≠veis.", "B. Sim, a transmiss√£o pode ocorrer mesmo sem sintomas vis√≠veis.", "C. S√≥ transmite durante crises de dor.", "D. Apenas mulheres transmitem sem sintomas." ], correct: 1, explanation: "Sim, o HPV pode ser transmitido mesmo quando a pessoa n√£o apresenta sintomas vis√≠veis. A maioria das infec√ß√µes por HPV s√£o assintom√°ticas, mas ainda podem ser transmitidas atrav√©s do contato √≠ntimo." },
            { id: "q11", case: "Pergunta para o jogador:", question: "Qual √© a principal forma de transmiss√£o do HPV?", hint: "O HPV √© uma infec√ß√£o sexualmente transmiss√≠vel.", options: [ "A. Atrav√©s do ar, como gripe.", "B. Contato sexual (vaginal, anal ou oral).", "C. Compartilhamento de utens√≠lios de cozinha.", "D. Picada de mosquito." ], correct: 1, explanation: "O HPV √© transmitido principalmente atrav√©s do contato sexual (vaginal, anal ou oral). O v√≠rus infecta a pele e mucosas, sendo uma das infec√ß√µes sexualmente transmiss√≠veis mais comuns." },
            { id: "q12", case: "Caso de J√∫lia (26 anos): J√∫lia est√° gr√°vida e descobriu que tem HPV. Ela est√° preocupada com o beb√™.", question: "Uma mulher gr√°vida com HPV pode transmitir o v√≠rus para o beb√™ durante o parto?", hint: "A transmiss√£o vertical √© poss√≠vel, mas rara.", options: [ "A. N√£o, √© imposs√≠vel transmitir HPV para o beb√™.", "B. Sim, mas √© muito raro. O beb√™ pode desenvolver papilomatose respirat√≥ria.", "C. Sempre transmite, causando malforma√ß√µes.", "D. S√≥ transmite se for cesariana." ], correct: 1, explanation: "A transmiss√£o do HPV da m√£e para o beb√™ durante o parto √© poss√≠vel, mas muito rara. Quando ocorre, pode causar papilomatose respirat√≥ria recorrente no beb√™, uma condi√ß√£o trat√°vel." },
            { id: "q13", case: "Pergunta para o jogador:", question: "Qual exame √© considerado o mais importante para detectar altera√ß√µes causadas pelo HPV no colo do √∫tero?", hint: "√â um exame de rotina que toda mulher deve fazer regularmente.", options: [ "A. Ultrassom p√©lvico.", "B. Exame de sangue.", "C. Papanicolau (exame citopatol√≥gico).", "D. Raio-X do abd√¥men." ], correct: 2, explanation: "O Papanicolau (exame citopatol√≥gico) √© o principal exame para detectar altera√ß√µes nas c√©lulas do colo do √∫tero causadas pelo HPV, permitindo o diagn√≥stico precoce de les√µes precursoras do c√¢ncer." },
            { id: "q14", case: "Caso de Pedro (30 anos): Pedro quer saber se homens tamb√©m podem desenvolver c√¢ncer por causa do HPV.", question: "Quais tipos de c√¢ncer o HPV pode causar em homens?", hint: "O HPV n√£o afeta apenas as mulheres.", options: [ "A. Apenas c√¢ncer de pr√≥stata.", "B. C√¢ncer de p√™nis, √¢nus e orofaringe (garganta).", "C. Apenas c√¢ncer de pele.", "D. HPV n√£o causa c√¢ncer em homens." ], correct: 1, explanation: "O HPV pode causar c√¢ncer de p√™nis, √¢nus e orofaringe (garganta) em homens. Por isso a vacina√ß√£o masculina tamb√©m √© importante para a preven√ß√£o desses c√¢nceres." },
            { id: "q15", case: "Pergunta para o jogador:", question: "O uso de preservativo (camisinha) previne 100% a transmiss√£o do HPV?", hint: "O HPV infecta √°reas que podem n√£o ser cobertas pelo preservativo.", options: [ "A. Sim, previne 100% se usado corretamente.", "B. N√£o previne nada, √© in√∫til contra HPV.", "C. Reduz significativamente o risco, mas n√£o previne 100%.", "D. S√≥ previne em mulheres." ], correct: 2, explanation: "O preservativo reduz significativamente o risco de transmiss√£o do HPV, mas n√£o previne 100%, pois o v√≠rus pode infectar √°reas da pele n√£o cobertas pela camisinha. Ainda assim, seu uso √© fundamental." },
            // Q16_new a Q30_new (As 10 perguntas restantes)
            { id: "q16_new", case: "Pergunta para o jogador:", question: "O v√≠rus HPV √© dividido em dois grupos: Baixo Risco e Alto Risco. Qual √© a principal diferen√ßa entre eles?", hint: "Pense na consequ√™ncia mais grave que o v√≠rus pode causar.", options: [ "A. Baixo Risco causa apenas verrugas; Alto Risco est√° associado a les√µes que podem evoluir para c√¢ncer.", "B. Baixo Risco afeta apenas a pele; Alto Risco afeta apenas as mucosas.", "C. Baixo Risco √© transmitido pela √°gua; Alto Risco √© transmitido por contato √≠ntimo.", "D. Apenas o Baixo Risco pode ser curado pelo sistema imunol√≥gico." ], correct: 0, explanation: "O HPV de Baixo Risco (tipos 6 e 11) causa verrugas genitais (condilomas). O HPV de Alto Risco (tipos 16, 18 e outros) causa les√µes silenciosas que, se n√£o tratadas, podem se transformar em c√¢ncer." },
            { id: "q17_new", case: "Caso de Sofia (16 anos): Sofia notou o surgimento de pequenas 'bolinhas' ou 'verruguinhas' na regi√£o genital e est√° com medo.", question: "Se essas les√µes forem realmente verrugas de HPV (Condiloma Acuminado), qual a medida mais importante que Sofia deve tomar imediatamente?", hint: "O diagn√≥stico correto deve sempre ser feito por um profissional de sa√∫de.", options: [ "A. Comprar uma pomada sem receita na farm√°cia para fazer o tratamento em casa.", "B. Ignorar, pois verrugas somem sozinhas em adolescentes.", "C. Buscar imediatamente um m√©dico (ginecologista ou urologista) para o diagn√≥stico correto e iniciar o tratamento das les√µes.", "D. Fazer um teste de gravidez, pois verrugas s√£o sinal de altera√ß√£o hormonal." ], correct: 2, explanation: "√â fundamental procurar um profissional de sa√∫de (Ginecologista, Urologista, Proctologista ou Dermatologista) para confirmar o diagn√≥stico de HPV e iniciar o tratamento adequado das les√µes, evitando a progress√£o e a transmiss√£o." },
            { id: "q18_new", case: "Caso de Clara (25 anos): Clara est√° iniciando o rastreio e pergunta ao m√©dico com que frequ√™ncia ela precisa fazer o Papanicolau (preventivo) para monitorar o colo do √∫tero.", question: "Qual √© o intervalo padr√£o recomendado no Brasil para a realiza√ß√£o do exame Papanicolau, ap√≥s dois exames anuais consecutivos negativos?", hint: "Papanicolau detecta les√µes precocemente, mas n√£o precisa ser anual na maioria dos casos.", options: [ "A. A cada 6 meses (semestralmente).", "B. A cada 3 anos (trienalmente).", "C. A cada 10 anos.", "D. Apenas quando tiver rela√ß√µes sexuais com um novo parceiro." ], correct: 1, explanation: "Ap√≥s dois resultados anuais normais consecutivos, o Papanicolau deve ser repetido a cada tr√™s anos. Essa periodicidade √© suficiente para detectar les√µes precursoras do c√¢ncer do colo do √∫tero a tempo de tratamento." },
            { id: "q19_new", case: "Pergunta para o jogador:", question: "Por que a vacina√ß√£o contra o HPV em meninos √© considerada t√£o importante quanto em meninas para a sa√∫de p√∫blica?", hint: "Pense no papel dos homens na cadeia de transmiss√£o e no risco de c√¢ncer masculino.", options: [ "A. Meninos s√≥ tomam a vacina para prevenir o c√¢ncer de pr√≥stata.", "B. Para proteger os meninos contra o c√¢ncer de p√™nis, √¢nus e orofaringe, e para reduzir a circula√ß√£o do v√≠rus na popula√ß√£o, protegendo indiretamente as meninas.", "C. A vacina em meninos s√≥ serve para prevenir verrugas genitais, o risco de c√¢ncer √© muito baixo.", "D. Os meninos s√≥ precisam tomar a vacina se a parceira j√° estiver infectada." ], correct: 1, explanation: "A vacina√ß√£o masculina protege diretamente contra c√¢nceres (p√™nis, √¢nus, orofaringe) e, ao reduzir o n√∫mero de portadores, diminui a transmiss√£o viral, criando uma 'imunidade de rebanho' que beneficia as mulheres." },
            { id: "q20_new", case: "Caso de Lucas (20 anos): Lucas j√° teve uma infec√ß√£o por HPV que seu corpo eliminou. Ele pergunta ao m√©dico se ele pode ter o v√≠rus novamente.", question: "Uma pessoa que j√° teve uma infec√ß√£o por HPV pode ser reinfectada (ou infectada por um tipo diferente de HPV) no futuro?", hint: "Existem mais de 150 tipos de HPV.", options: [ "A. N√£o, uma vez que a infec√ß√£o √© eliminada, o corpo fica imune para sempre contra o v√≠rus.", "B. Sim, pois a prote√ß√£o √© espec√≠fica para o tipo que causou a infec√ß√£o anterior, e existem muitos outros tipos de HPV circulando.", "C. Sim, mas apenas se a pessoa tiver uma doen√ßa autoimune muito grave.", "D. N√£o, a vacina impede qualquer reinfec√ß√£o de acontecer." ], correct: 1, explanation: "O sistema imunol√≥gico cria prote√ß√£o principalmente para o tipo espec√≠fico de HPV que causou a infec√ß√£o. Como existem muitos tipos de HPV, a pessoa pode ser facilmente infectada por um tipo diferente no futuro." },
            { id: "q21_new", case: "Caso de Bia (24 anos): Bia nunca tomou a vacina do HPV na adolesc√™ncia. Ela pergunta se ainda vale a pena se vacinar na idade adulta.", question: "Se uma pessoa adulta (fora da faixa et√°ria priorit√°ria, mas dentro da faixa estendida) nunca foi vacinada, a vacina do HPV ainda √© recomendada?", hint: "O benef√≠cio √© a preven√ß√£o dos tipos que a pessoa *ainda n√£o* pegou.", options: [ "A. N√£o, pois a vacina √© ineficaz ap√≥s os 18 anos.", "B. N√£o, pois se ela j√° teve contato, a vacina n√£o tem utilidade.", "C. Sim, a vacina ainda √© recomendada, pois protege contra os tipos de HPV que a pessoa ainda n√£o adquiriu, mesmo que ela j√° tenha tido contato com outro tipo.", "D. Sim, mas ela precisa fazer uma cirurgia para remover o v√≠rus antes de se vacinar." ], correct: 2, explanation: "Mesmo que um adulto j√° tenha tido contato com um ou dois tipos de HPV, a vacina continua protegendo contra os outros tipos perigosos contidos nela que a pessoa ainda n√£o foi exposta. O benef√≠cio preventivo ainda √© alto." },
            { id: "q22_new", case: "Caso de Renata (28 anos): Renata est√° gr√°vida e descobriu que tem verrugas genitais causadas pelo HPV.", question: "Qual √© a principal preocupa√ß√£o m√©dica em rela√ß√£o √†s verrugas de HPV durante a gravidez?", hint: "Pense no risco de transmiss√£o para o beb√™.", options: [ "A. A principal preocupa√ß√£o √© que o HPV cause aborto espont√¢neo.", "B. O risco de que as verrugas cres√ßam muito e dificultem o parto normal, al√©m da possibilidade de transmiss√£o do v√≠rus ao beb√™ durante a passagem pelo canal de parto.", "C. N√£o h√° preocupa√ß√£o, pois o HPV n√£o atravessa a placenta.", "D. O HPV obriga a m√£e a fazer uma ces√°rea, mesmo que n√£o haja outras complica√ß√µes." ], correct: 1, explanation: "As verrugas podem crescer rapidamente devido √†s mudan√ßas hormonais na gravidez, o que pode atrapalhar o parto vaginal. H√° tamb√©m o risco de transmiss√£o vertical, que pode causar papilomatose respirat√≥ria no rec√©m-nascido." },
            { id: "q23_new", case: "Pergunta para o jogador:", question: "Qual das afirma√ß√µes abaixo melhor descreve a rela√ß√£o entre a infec√ß√£o por HPV e outras IST?", hint: "O comportamento de risco que leva ao HPV exp√µe a outros agentes.", options: [ "A. Ter HPV torna a pessoa imune a outras IST, como o HIV.", "B. N√£o h√° nenhuma rela√ß√£o; s√£o doen√ßas completamente separadas.", "C. A presen√ßa de HPV indica que o indiv√≠duo est√° exposto a comportamentos de risco, o que aumenta a probabilidade de contrair outra IST simultaneamente (coinfec√ß√£o).", "D. O tratamento do HPV trata automaticamente todas as outras IST." ], correct: 2, explanation: "O HPV, como as outras IST, √© transmitido principalmente por contato √≠ntimo desprotegido. Se uma pessoa se infecta com HPV, √© um sinal de que ela pode estar vulner√°vel ou j√° infectada por outra IST, como HIV, S√≠filis ou Hepatites." },
            { id: "q24_new", case: "Caso de Daniel (28 anos): Daniel est√° preocupado com o HPV e n√£o tem verrugas. Ele quer saber qual √© o exame de rotina mais eficaz para diagnosticar o HPV em homens assintom√°ticos.", question: "Qual √© a recomenda√ß√£o atual da maioria dos √≥rg√£os de sa√∫de para o rastreamento de HPV em homens que n√£o apresentam les√µes vis√≠veis?", hint: "O foco n√£o √© o exame, mas o acompanhamento e a vacina.", options: [ "A. Fazer o exame de Papanicolau (preventivo) adaptado para homens.", "B. N√£o h√° exame de rotina universalmente recomendado para homens assintom√°ticos; o foco √© a vacina√ß√£o e a observa√ß√£o de les√µes (verrugas).", "C. Fazer um exame de sangue a cada 6 meses.", "D. Fazer uma bi√≥psia preventiva do p√™nis anualmente." ], correct: 1, explanation: "Atualmente, n√£o h√° um exame de rastreamento de HPV em homens t√£o eficaz e padronizado quanto o Papanicolau para mulheres. O foco m√©dico principal √© na vacina√ß√£o em idade jovem e no exame cl√≠nico minucioso em caso de aparecimento de les√µes." },
            { id: "q25_new", case: "Pergunta para o jogador:", question: "O que significa o termo 'les√µes precursoras de c√¢ncer' (NIC 1, NIC 2, NIC 3) e por que elas s√£o o alvo principal do Papanicolau?", hint: "Essas les√µes s√£o um est√°gio intermedi√°rio entre a infec√ß√£o e o c√¢ncer.", options: [ "A. S√£o as verrugas genitais em est√°gio inicial.", "B. S√£o altera√ß√µes nas c√©lulas causadas pelo HPV que, se n√£o tratadas, *podem* evoluir para c√¢ncer (n√£o s√£o c√¢ncer ainda), e s√£o detect√°veis no Papanicolau.", "C. S√£o tumores malignos que j√° se espalharam.", "D. S√£o inflama√ß√µes simples que desaparecem com √°gua e sab√£o." ], correct: 1, explanation: "Les√µes precursoras s√£o mudan√ßas nas c√©lulas do colo do √∫tero causadas pelo HPV. Elas s√£o a chance de tratar a condi√ß√£o antes que ela se torne um c√¢ncer, e √© por isso que o Papanicolau, que as detecta, √© t√£o vital." }
        ];

        // Data SDK handler (Mantido)
        const dataHandler = { onDataChanged(data) { console.log('Game data updated:', data); } };

        // Element SDK configuration (Mantido)
        async function onConfigChange(newConfig) { /* ... */ }
        function mapToCapabilities(config) { /* ... */ }
        function mapToEditPanelValues(config) { /* ... */ }

        // --- Game Logic ---

        function initializeBoard() {
            const gameBoard = document.getElementById('gameBoard');
            gameBoard.innerHTML = '';
            
            for (let i = 1; i <= boardSize; i++) {
                const cell = document.createElement('div');
                cell.className = 'board-cell';
                cell.id = `cell-${i}`;

                const icon = document.createElement('div');
                icon.className = 'cell-icon';
                
                const number = document.createElement('div');
                number.textContent = i;
                
                // Configura√ß√µes da C√©lula
                if (i === 1) {
                    cell.classList.add('cell-start');
                    icon.textContent = 'üèÅ';
                    number.textContent = 'IN√çCIO';
                } else if (i === boardSize) {
                    cell.classList.add('cell-finish');
                    icon.textContent = 'üèÜ';
                    number.textContent = 'FIM';
                } else {
                    // Todas as outras s√£o casas de pergunta/especiais
                    cell.classList.add('special');
                    icon.textContent = '‚ùì';
                    cell.title = 'Casa de pergunta';
                }

                cell.appendChild(icon);
                cell.appendChild(number);
                gameBoard.appendChild(cell);
            }
            updatePlayerPositions();
        }

        function updatePlayerPositions() { /* ... */ }

        // NOVO: Fun√ß√µes de Controle de V√≠deo
        function hideIntroVideo() {
            const videoContainer = document.getElementById('introVideoContainer');
            const video = document.getElementById('intro-video');
            
            if (videoContainer && videoContainer.style.display !== 'none') {
                video.pause();
                videoContainer.style.display = 'none';
            }
        }

        function showIntroVideo() {
            const videoContainer = document.getElementById('introVideoContainer');
            const video = document.getElementById('intro-video');
            
            if (videoContainer) {
                videoContainer.style.display = 'block';
                video.currentTime = 0;
                video.play().catch(e => console.log('Autoplay blocked:', e));
            }
        }

        async function rollDice() {
            if (gameState.isRolling || gameState.gameCompleted) return;

            // 1. ESCONDE O V√çDEO NO PRIMEIRO CLIQUE
            hideIntroVideo(); 

            gameState.isRolling = true;
            const dice = document.getElementById('dice');
            const diceLabel = document.getElementById('diceLabel');

            dice.classList.add('rolling');
            diceLabel.textContent = 'Girando...';

            const rollResult = Math.floor(Math.random() * 6) + 1;

            setTimeout(async () => {
                dice.classList.remove('rolling');
                dice.textContent = rollResult;
                diceLabel.textContent = `Voc√™ tirou ${rollResult}!`;

                await movePlayer(rollResult);
                gameState.isRolling = false;

                setTimeout(() => {
                    dice.textContent = 'üéØ';
                    const currentLabel = config.dice_label || defaultConfig.dice_label;
                    diceLabel.textContent = currentLabel;
                }, 2000);
            }, 2000);
        }

        async function movePlayer(steps) {
            const currentPlayer = gameState.players[gameState.currentPlayer];
            currentPlayer.position = Math.min(currentPlayer.position + steps, boardSize);
            updatePlayerPositions();
            currentPlayer.score += steps * 10;
            showMessage(`${currentPlayer.name} avan√ßou ${steps} casas! Posi√ß√£o: ${currentPlayer.position}`, 'info');

            // L√ìGICA DE FIM DE JOGO
            if (currentPlayer.position >= boardSize) {
                gameState.gameCompleted = true;
                gameState.winner = gameState.currentPlayer;
                setTimeout(() => showGameComplete(), 1000);
                return;
            }

            // TODAS AS CASAS (EXCETO IN√çCIO/FIM) DISPARAM PERGUNTA
            setTimeout(() => {
                if (currentPlayer.position !== 1 && currentPlayer.position !== boardSize) {
                    const questionIndex = Math.floor(Math.random() * hpvQuestions.length);
                    showQuestion(hpvQuestions[questionIndex]);
                    return;
                } else {
                    switchPlayer();
                    updatePlayerStats();
                }
            }, 1500);

            updatePlayerStats();
            await saveGameState();
        }

        function switchPlayer() { gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1; updateTurnIndicator(); }
        function updateTurnIndicator() { /* ... */ }
        function showQuestion(question) { /* ... */ }
        function selectAnswer(selectedIndex) { /* ... */ }
        function closeQuestionModal() { /* ... */ }
        function showExplosion() { /* ... */ }
        function showRewardAnimation() { /* ... */ }
        function showGameComplete() { /* ... */ }
        function showMessage(text, type = 'info') { /* ... */ }
        function updatePlayerStats() { /* ... */ }
        async function saveGameState() { /* ... */ }

        // --- Initialize game ---
        async function initializeGame() {
            // Inicializa SDKs
            if (window.dataSdk) { /* ... */ }
            if (window.elementSdk) {
                await window.elementSdk.init({ defaultConfig, onConfigChange, mapToCapabilities, mapToEditPanelValues });
                if (window.elementSdk.config) {
                    Object.assign(config, window.elementSdk.config);
                    onConfigChange(config);
                }
            }
            
            initializeBoard();
            updatePlayerStats();
            updateTurnIndicator();
            showMessage('üéÆ Jogo da Vida HPV para 2 jogadores! üîµ Jogador 1 come√ßa! Gire a roleta para jogar!', 'info');
            
            // 2. GARANTE QUE O V√çDEO APARE√áA NA INICIALIZA√á√ÉO
            showIntroVideo();
        }

        document.addEventListener('DOMContentLoaded', initializeGame);
    </script>
</body>
</html>
